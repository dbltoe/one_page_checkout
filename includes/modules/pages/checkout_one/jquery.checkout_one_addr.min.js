// -----
// Part of the One-Page Checkout plugin, provided under GPL 2.0 license by lat9.
// Copyright (C) 2018-2023, Vinos de Frutas Tropicales.  All rights reserved.
//
// Last updated: OPC v2.4.6
//
jQuery.fn.state=function(t,e){return"show"===t?(this.show(),!e||"state-bill"!==this.attr("id")&&"state-ship"!==this.attr("id")||document.getElementById(this.attr("id")).setAttribute("required","")):(this.hide(),!e||"state-bill"!==this.attr("id")&&"state-ship"!==this.attr("id")||document.getElementById(this.attr("id")).removeAttribute("required")),this},jQuery(document).ready(function(){var e=jQuery("#country-bill option:selected").val(),s=jQuery("#country-ship option:selected").val(),a=jQuery("#state-bill").prop("required");function n(t,n){var i=!1,o='<option selected="selected" value="">'+textPleaseSelect+"</option>";jQuery.each(JSON.parse(c2z),function(t,e){var s;n==t&&(i=!0,s=[],jQuery.each(e,function(t,e){s[e]=t}),Object.keys(s).sort().forEach(function(t){o+='<option value="'+s[t]+'">'+t+"</option>"}))}),i?(jQuery("#state-"+t+", #state-"+t+"+span").state("hide",a),jQuery("#stateZone-"+t).html(o),jQuery("#stateZone-"+t+", #stateZone-"+t+"+span, #stateZone-"+t+"+span+br").state("show",a)):(jQuery("#stateZone-"+t+", #stateZone-"+t+"+span, #stateZone-"+t+"+span+br").state("hide",a),jQuery("#state-"+t+", #state-"+t+"+span").state("show",a))}initializeStateZones=function(){1==jQuery("#stateZone-bill > option").length?jQuery("#stateZone-bill, #stateZone-bill+span, #stateZone-bill+span+br").state("hide",a):(jQuery("#state-bill, #state-bill+span").state("hide",a),jQuery("#stateZone-bill").state("show",a)),1==jQuery("#stateZone-ship > option").length?jQuery("#stateZone-ship, #stateZone-ship+span, #stateZone-ship+span+br").state("hide",a):(jQuery("#state-ship, #state-ship+span").state("hide",a),jQuery("#stateZone-ship").state("show",a))},initializeStateZones(),jQuery(document).on("change","#country-bill, #checkoutOneBillto input",function(t){e!=jQuery("#country-bill option:selected").val()&&(e=jQuery("#country-bill option:selected").val(),n("bill",jQuery("#country-bill option:selected").val()))}),jQuery(document).on("change","#country-ship, #checkoutOneSendto input",function(t){s!=jQuery("#country-ship option:selected").val()&&(s=jQuery("#country-ship option:selected").val(),n("ship",jQuery("#country-ship option:selected").val()))})});